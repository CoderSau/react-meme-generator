(this["webpackJsonpreact-meme-generator"]=this["webpackJsonpreact-meme-generator"]||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(25),s=n.n(i),c=(n(75),n(76),n(39)),l=n(55),o=n(20),d=n(21),u=n(24),h=n(23),j=n(14),g=n(54),m=n.n(g),x=n(65),p=n(1),b=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={image:null},e.handleLoad=function(){e.setState({image:e.image})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"componentDidUpdate",value:function(e){var t=this.props;e.src===t.src&&e.width===t.width&&e.height===t.height||(this.props.src?this.loadImage():this.setState({image:null}))}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.image=new window.Image,t=this.props.src,this.image.src=t,this.image.sameSite="None",this.image.crossOrigin="anonymous",this.image.width=this.props.width,this.image.height=this.props.height,this.image.addEventListener("load",this.handleLoad);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(p.jsx)(j.b,{x:this.props.x,y:this.props.y,image:this.state.image,ref:function(t){e.imageNode=t}})}}]),n}(a.Component),f=n(33),O=function(e){return Object(p.jsx)(j.a,{ref:e.deleteRef,onClick:function(){return e.delete()},onTouchEnd:function(){return e.delete()},children:Object(p.jsx)(j.e,{width:18,height:13,fontSize:20,fontFamily:"Arial",text:"X",fill:"red"})})},v=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).textFieldOnDblClick=function(e){var t=e.currentTarget.attrs,n=e.currentTarget.absolutePosition();a.setState({isHide:!1});var r=n.x-20,i=n.y+63,s=document.createElement("textarea");document.getElementById("canvasDiv").appendChild(s),s.value=t.text,s.style.position="absolute",s.style.top=i+"px",s.style.left=r+"px",s.style.fontSize=t.fontSize+"px",s.style.width=t.width-2*t.padding+"px",s.style.height=t.height-2*t.padding+5+"px",s.style.fontSize=t.fontSize+"px",s.style.border="none",s.style.padding="0px",s.style.margin="0px",s.style.overflow="hidden",s.style.background="none",s.style.outline="none",s.style.resize="none",s.style.lineHeight=t.lineHeight,s.style.fontFamily=t.fontFamily,s.style.transformOrigin="left top",s.style.textAlign=t.align,s.style.color="black";var c=t.rotation,l="";c&&(l+="rotateZ("+c+"deg)");var o=0;navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(o+=2+Math.round(t.fontSize/20)),l+="translateY(-"+o+"px)",s.style.transform=l,s.style.height="auto",s.style.height=s.scrollHeight+3+"px",s.focus(),s.onblur=function(){a.props.handleTextChange("text",s.value),document.getElementById("canvasDiv").removeChild(s),a.setState({isHide:!0})},s.onTouchStart=function(){a.props.handleTextChange("text",s.value),document.getElementById("canvasDiv").removeChild(s),a.setState({isHide:!0})},a.transformer&&a.transformer.detach(),a.props.selectedText(a.props.index,s)},a.textFieldOnClick=function(e){a.handleSelected(),!0===a.props.input.selected?(a.checkNode(),a.props.selectedText(a.props.index,null)):a.props.selectedText(null)},a.handleSelected=function(){a.props.input.selected=!a.props.input.selected,a.forceUpdate()},a.state={isHide:!0},a.deleteRef=r.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.input.selected&&this.checkNode()}},{key:"checkNode",value:function(){var e=this.textNode,t=this.deleteRef.current;this.transformer.add(t),this.props.input.selected?(this.transformer.nodes([e]),t.position(this.transformer.findOne(".top-right").position())):this.transformer.detach(),this.transformer.getLayer().batchDraw()}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(j.e,Object(f.a)(Object(f.a)({draggable:!0,ref:function(t){e.textNode=t},onClick:function(t){return e.textFieldOnClick(t)},onTouchStart:function(t){return e.textFieldOnClick(t)},visible:this.state.isHide},this.props.input),{},{onDblClick:function(t){return e.textFieldOnDblClick(t)},onDblTap:function(t){return e.textFieldOnDblClick(t)},onDragEnd:function(t){return e.props.handleDragEnd(t.currentTarget.attrs,e.props.index)}})),this.props.input.selected&&Object(p.jsxs)(j.a,{children:[Object(p.jsx)(j.f,{ref:function(t){e.transformer=t},onTransform:function(t){e.deleteRef.current.position(t.currentTarget.findOne(".top-right").position())},onTransformEnd:function(t){e.props.handleTextChange("scaleX",t.target.attrs.scaleX),e.props.handleTextChange("scaleY",t.target.attrs.scaleY)}}),Object(p.jsx)(O,{deleteRef:this.deleteRef,delete:this.props.deleteText})]})]})}}]),n}(a.Component),y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleSelect=function(){a.handleSelected(),!0===a.state.selected?(a.checkNode(),a.props.selectedImage(a.props.index)):a.props.selectedImage(null)},a.handleLoad=function(){a.setState({image:a.image}),a.checkNode()},a.handleSelected=function(){a.setState((function(e){return{selected:!e.selected}}))},a.state={image:null,selected:!0},a.deleteRef=r.a.createRef(),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.loadImage()}},{key:"checkNode",value:function(){var e=this.imageNode,t=this.deleteRef.current;this.transformer.add(t),this.state.selected?(this.transformer.nodes([e]),t.position(this.transformer.findOne(".top-right").position())):this.transformer.detach(),this.transformer.getLayer().batchDraw()}},{key:"componentDidUpdate",value:function(e){e.src!==this.props.src&&this.loadImage()}},{key:"componentWillUnmount",value:function(){this.image.removeEventListener("load",this.handleLoad)}},{key:"loadImage",value:function(){this.image=new window.Image,this.image.crossOrigin="anonymous",this.image.src=this.props.src,this.image.width=300,this.image.width=300,this.image.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e=this;return Object(p.jsxs)(r.a.Fragment,{children:[Object(p.jsx)(j.a,{draggable:!0,onClick:function(){return e.handleSelect()},onTouchStart:function(){return e.handleSelect()},ref:function(t){e.imageNode=t},children:Object(p.jsx)(j.b,Object(f.a)({image:this.state.image},this.props.properties))}),this.state.selected&&Object(p.jsxs)(j.a,{children:[Object(p.jsx)(j.f,{ref:function(t){e.transformer=t},onTransformEnd:function(){return e.handleSelected()},onTransform:function(t){e.deleteRef.current.position(t.currentTarget.findOne(".top-right").position())}}),Object(p.jsx)(O,{deleteRef:this.deleteRef,delete:this.props.deleteImage})]})]})}}]),n}(a.Component),C=n(129),w=n(125),k=n(69),S=n(128),T=n(130),N=n(131),L=["Impact","Arial","Times New Roman","Georiga","Verdana","Lucida Console"],I=function(e){var t=e.text,n=e.handleTextChange;return Object(p.jsxs)(C.a,{children:[Object(p.jsx)(C.a.Group,{children:Object(p.jsx)(C.a.Control,{as:"textarea",name:"text",value:t.text,placeholder:"enter text",onChange:function(e){return n(e.target.name,e.target.value)}})}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{md:3,children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Font "}),Object(p.jsx)(C.a.Control,{type:"number",name:"fontSize",value:t.fontSize,onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})}),Object(p.jsx)(k.a,{md:3,children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Text Color"}),Object(p.jsx)(C.a.Control,{type:"color",name:"fill",value:t.fill,onChange:function(e){return n(e.target.name,e.target.value)}})]})}),Object(p.jsx)(k.a,{md:3,children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Stroke Width"}),Object(p.jsx)(C.a.Control,{type:"number",value:t.strokeWidth,name:"strokeWidth",onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})}),Object(p.jsx)(k.a,{md:3,children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Stroke"}),Object(p.jsx)(C.a.Control,{type:"color",name:"stroke",value:t.stroke,onChange:function(e){return n(e.target.name,e.target.value)}})]})})]}),Object(p.jsx)(w.a,{className:"mt-2",children:Object(p.jsx)(k.a,{children:Object(p.jsx)(S.a,{defaultActiveKey:"0",children:Object(p.jsxs)(T.a,{children:[Object(p.jsx)(T.a.Header,{children:Object(p.jsx)(S.a.Toggle,{as:N.a,variant:"link",eventKey:"0",children:"More option for text"})}),Object(p.jsx)(S.a.Collapse,{eventKey:"0",children:Object(p.jsxs)(T.a.Body,{children:[Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Padding"}),Object(p.jsx)(C.a.Control,{type:"number",name:"padding",value:t.padding,onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Letter Spacing"}),Object(p.jsx)(C.a.Control,{type:"number",name:"letterSpacing",value:t.letterSpacing,onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"line Height"}),Object(p.jsx)(C.a.Control,{type:"number",name:"lineHeight",value:t.lineHeight,onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})})]}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Font Family "}),Object(p.jsxs)(C.a.Control,{as:"select",value:t.fontFamily,name:"fontFamily",onChange:function(e){return n(e.target.name,e.target.value)},children:[Object(p.jsx)("option",{}),L.map((function(e){return Object(p.jsx)("option",{value:e,children:e},e)}))]})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Align"}),Object(p.jsxs)(C.a.Control,{as:"select",value:t.align,name:"align",onChange:function(e){return n(e.target.name,e.target.value)},children:[Object(p.jsx)("option",{}),Object(p.jsx)("option",{value:"center",children:"Center"}),Object(p.jsx)("option",{value:"right",children:"Right"}),Object(p.jsx)("option",{value:"left",children:"Left"})]})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Decoration"}),Object(p.jsxs)(C.a.Control,{as:"select",value:t.textDecoration,name:"textDecoration",onChange:function(e){return n(e.target.name,e.target.value)},children:[Object(p.jsx)("option",{}),Object(p.jsx)("option",{value:"",children:"Normal"}),Object(p.jsx)("option",{value:"line-through",children:"line-through"}),Object(p.jsx)("option",{value:"underline",children:"underline"})]})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"opacity"}),Object(p.jsx)(C.a.Control,{type:"range",min:1,max:2,name:"opacity",step:.05,value:String(2-t.opacity),onChange:function(e){return n(e.target.name,Number(2-e.target.value))}})]})})]}),Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Shadow Blur"}),Object(p.jsx)(C.a.Control,{type:"number",name:"shadowBlur",value:t.shadowBlur,onChange:function(e){return n(e.target.name,Number(e.target.value))}})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"shadow Color"}),Object(p.jsx)(C.a.Control,{type:"color",name:"shadowColor",value:t.shadowColor,onChange:function(e){n(e.target.name,e.target.value)}})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"Shadow Opacity"}),Object(p.jsx)(C.a.Control,{type:"range",min:1,max:2,name:"shadowOpacity",step:.05,value:String(2-t.shadowOpacity),onChange:function(e){return n(e.target.name,Number(2-e.target.value))}})]})})]})]})})]})})})})]})};I.defaultProps={text:{fontSize:0,strokeWidth:0,shadowBlur:0,padding:0,letterSpacing:0,lineHeight:0,fill:"#000000",shadowColor:"#000000",stroke:"#000000"}};var D=I,R=n(46),F=n(127),H=function(e){var t=Object(a.useState)(!1),n=Object(R.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(""),c=Object(R.a)(s,2),l=c[0],o=c[1],d=Object(a.useState)(""),u=Object(R.a)(d,2),h=u[0],j=u[1],g=function(){!function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e.dataURL(),h),i(!1)};return Object(p.jsxs)("div",{children:[Object(p.jsx)(N.a,{className:"download-button",onClick:function(){return i(!r),void o(e.dataURL())},children:"Download File"}),Object(p.jsxs)(F.a,{show:r,onHide:function(){return i(!r)},size:"xl",children:[Object(p.jsx)(F.a.Header,{closeButton:!0,children:Object(p.jsx)(F.a.Title,{children:"Download File"})}),Object(p.jsxs)(F.a.Body,{className:"p-0",children:[Object(p.jsx)("div",{className:"text-center",children:Object(p.jsx)("img",{src:l,alt:"meme",width:e.stageWidth,height:e.stageHeight})}),Object(p.jsxs)(C.a,{className:"p-2",children:[Object(p.jsxs)(C.a.Group,{children:[Object(p.jsx)(C.a.Label,{children:"File Name"}),Object(p.jsx)(C.a.Control,{name:"name",type:"text",required:!0,value:h,onChange:function(e){j(e.target.value)}})]}),Object(p.jsx)(N.a,{variant:"primary",type:"button",onClick:function(){return g()},block:!0,children:"Download File"})]})]})]})]})},E=n(66),z=n(68),B=n(67),G=1500,W=1500,A=window.innerWidth<500?window.innerWidth-20:500,U=window.innerHeight<500?window.innerHeight-20:500,M=function(e){var t=e.stageWidth,n=e.stageHeight,a=e.handleSizeChange;return Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{children:Object(p.jsxs)(E.a,{className:"d-flex flex-column",children:[Object(p.jsxs)(z.a,{className:"text-center text-nowrap",children:["Width ",t,"px"]}),Object(p.jsx)(B.a,{type:"range",min:20,max:G,name:"stageWidth",step:1,value:Number(t),onChange:function(e){return a(e)}})]})}),Object(p.jsx)(k.a,{children:Object(p.jsxs)(E.a,{className:"d-flex flex-column",children:[Object(p.jsxs)(z.a,{className:"text-center text-nowrap",children:["Height ",n,"px"]}),Object(p.jsx)(B.a,{className:"",type:"range",min:20,max:W,name:"stageHeight",step:1,value:Number(n),onChange:function(e){return a(e)}})]})})]})},P=n(126),K=n(71),X=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={inputs:[],images:[],backgroundImageSrc:null,backgroundImageName:null,templateName:null,selectedText:null,selectedTextarea:null,selectedImage:null,src:"",stageWidth:A,stageHeight:U,triggerCors:!1,defaultSelect:""},e.addText=function(){var t=e.state.inputs;null!=e.state.selectedText&&(t[e.state.selectedText].selected=!1),e.setState((function(e){return{inputs:[].concat(Object(l.a)(t),[{x:50,y:50,text:"yaz\u0131 ekleyin",fontSize:25,selected:!0,fontFamily:"Impact",fill:"#ffffff",strokeWidth:1.5,stroke:"#000000",shadowColor:"#000000",align:"center",padding:5,letterSpacing:1,lineHeight:1,textDecoration:"none",verticalAlign:"top",opacity:1,shadowOpacity:1,shadowBlur:0}]),selectedText:e.inputs.length}}))},e.addImage=function(t){var n=t.target.files,a=new FileReader;a.readAsDataURL(n[0]),a.onload=function(t){e.setState((function(e){return{images:[].concat(Object(l.a)(e.images),[{properties:{x:40,y:50},src:t.target.result}]),selectedImage:e.images.length}}))}},e.handleTextChange=function(t,n){if(null!==e.state.selectedText){var a=e.state.inputs;a[e.state.selectedText][t]=n,a[e.state.selectedText].selected=!1,e.setState({inputs:a})}else alert("please select a text")},e.selectText=function(t,n){var a=e.state.inputs,r=e.state.selectedText;null!=r&&(a[r].selected=!1),null!=t&&(a[t].selected=!0),e.setState({inputs:a,selectedText:t,selectedTextarea:n})},e.selectImage=function(t){e.setState({selectedImage:t})},e.deleteText=function(t){var n=t;if(null!=n){var a=e.state.inputs;a.splice(n,1),e.setState({inputs:a,selectedText:null,selectedTextarea:null})}else alert("please select a text")},e.handleDragEnd=function(t,n){var a=e.state.inputs;a[n].x=t.x,a[n].y=t.y,e.setState({inputs:a})},e.deleteImage=function(){var t=e.state.selectedImage;if(null!=t){var n=e.state.images;delete n[t],e.setState({images:n,selectedImage:null})}else alert("please select a image")},e.addBackground=function(t){var n=t.target.files[0],a=new FileReader,r=new Image;r.onload=function(){var t=r.width,n=r.height;t=t>G?G:t,n=n>W?W:n,e.setState({backgroundImageSrc:r.src,backgroundImageName:r.name,stageWidth:t,stageHeight:n})},a.onload=function(){r.name=n.name,r.src=a.result},a.readAsDataURL(n)},e.handleSizeChange=function(t){e.setState(Object(c.a)({},t.target.name,Number(t.target.value)))},e.returnDataURL=function(){return e.stageRef?e.stageRef.getStage().toDataURL():null},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.document.addEventListener("keydown",(function(t){"Delete"===t.key&&null!=e.state.selectedText&&e.deleteText()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.src,a=t.backgroundImageSrc,r=t.stageWidth,i=t.stageHeight,s=t.images,c=t.inputs,l=t.selectedText,o=t.triggerCors;return Object(p.jsx)(P.a,{className:"pl-4 pr-4",fluid:!0,children:Object(p.jsxs)(w.a,{children:[Object(p.jsx)(k.a,{md:4,children:Object(p.jsx)(D,{handleTextChange:this.handleTextChange,selectedText:l,text:c[l]})}),Object(p.jsxs)(k.a,{id:"canvasDiv",md:4,children:[Object(p.jsxs)(w.a,{children:[Object(p.jsxs)("label",{className:"btn btn-outline-primary  col m-2",children:["Change Background image",Object(p.jsx)(K.a,{onChange:function(t){return e.addBackground(t)},hidden:!0})]}),Object(p.jsxs)("label",{className:"btn btn-outline-primary  col m-2 d-flex",children:[Object(p.jsx)("span",{className:"m-auto",children:"Add Image"}),Object(p.jsx)(K.a,{onChange:function(t){return e.addImage(t)},hidden:!0})]}),Object(p.jsx)(N.a,{variant:"outline-primary",className:"col m-2",onClick:function(){return e.addText()},children:"Add Text"})]}),Object(p.jsx)(w.a,{children:Object(p.jsx)(k.a,{className:"pt-2",children:Object(p.jsx)(j.d,{className:"justify-content-center mb-5 d-flex",width:r,height:i,ref:function(t){e.stageRef=t},children:Object(p.jsxs)(j.c,{ref:function(t){e.layerRef=t},children:[Object(p.jsx)(b,{src:a||n,width:r,triggerCors:o,height:i}),s&&s.map((function(t,n){return void 0===t?null:Object(p.jsx)(y,{src:t.src,properties:t.properties,index:n,selectedImage:e.selectImage,deleteImage:e.deleteImage},n)})),c&&c.map((function(t,n){return Object(p.jsx)(v,{input:t,handleDragEnd:e.handleDragEnd,stagePosition:function(){return e.stageRef.container().getBoundingClientRect()},handleTextChange:e.handleTextChange,index:n,selectedText:e.selectText,deleteText:function(){return e.deleteText(n)}},n)}))]})})})})]}),Object(p.jsxs)(k.a,{className:"memegenerator-right-col",md:4,children:[Object(p.jsx)(M,{stageWidth:r,stageHeight:i,handleSizeChange:this.handleSizeChange}),Object(p.jsx)(w.a,{children:Object(p.jsx)(k.a,{children:Object(p.jsx)(H,{dataURL:function(){return e.returnDataURL()},width:r,height:i})})})]})]})})}}]),n}(a.Component);var Y=function(){return Object(p.jsx)("div",{className:"App",style:{padding:30},children:Object(p.jsx)(X,{})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};n(122);s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Y,{})}),document.getElementById("root")),J()},75:function(e,t,n){},76:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.9d98dae0.chunk.js.map